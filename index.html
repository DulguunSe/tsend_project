<!doctype html>
<html lang="mn">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ë–æ–¥–ª–∏–π–Ω —Ö”©—Ç”©—á - –°—ç—Ç–≥—ç–ª–∑“Ø–π–Ω –¶–∞–≥ –¢–æ–≤–ª–æ—Ö</title>
  <meta name="description" content="–°—ç—Ç–≥—ç–ª–∑“Ø–π–Ω –∑”©–≤–ª”©–≥”©”©, –Ω–∏–π—Ç–ª—ç–ª –±–æ–ª–æ–Ω —Ü–∞—Ö–∏–º —Ü–∞–≥ —Ç–æ–≤–ª–æ–ª—ã–Ω —Å–∏—Å—Ç–µ–º" />
  <link rel="stylesheet" href="./style.css">

  <!-- Swiper CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <style>
    input[type="date"]:invalid {
      border-color: #d1d5db;
      background-color: #f3f4f6;
      color: #9ca3af;
    }

    .swiper {
      padding-bottom: 20px;
    }

    .swiper-slide {
      width: "300px";
    }

    .time-slot.active {
      background-color: #2563eb;
      color: white;
    }

    .time-slot {
      display: inline-block;
      padding: 6px 12px;
      border: 1px solid #2563eb;
      border-radius: 6px;
      margin: 4px;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo"><img src="./img/indra_logo-removebg-preview.png" alt=""></div>
      </div>
      <nav>
        <a class="navlink" href="#articles">–ù–∏–π—Ç–ª—ç–ª</a>
        <a class="navlink" href="#booking">–¶–∞–≥ —Ç–æ–≤–ª–æ—Ö</a>
      </nav>
      <div class="hamburger" id="hamburger">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
      </div>
    </header>

    <div class="mobile-nav" id="mobileNav">
      <a href="#articles">–ù–∏–π—Ç–ª—ç–ª</a>
      <a href="#booking">–¶–∞–≥ —Ç–æ–≤–ª–æ—Ö</a>
    </div>

    <section class="hero">
      <h1></h1>
      <p class="lead"></p>
    </section>

    <div class="grid">
      <main>
        <div id="articles" class="card">
          <h2 style="margin-top:0">–ù–∏–π—Ç–ª—ç–ª</h2>

          <div class="swiper articles" style="margin-top:12px">
            <div class="swiper-wrapper">
              <div class="swiper-slide">
                <div class="article">
                  <img src="./img/download (1).jpeg" alt="">
                  <h3>”®–¥—Ä–∏–π–Ω —Å—Ç—Ä–µ—Å—Å–∏–π–≥ —Ö—ç—Ä—Ö—ç–Ω –±—É—É—Ä—É—É–ª–∞—Ö –≤—ç</h3>
                  <p>–ë–∞–≥–∞ —Ö—É–≥–∞—Ü–∞–∞–Ω—ã –∞–º—å—Å–≥–∞–ª—ã–Ω –¥–∞—Å–≥–∞–ª, –∑–∞–≤—Å–∞—Ä–ª–∞–≥–∞ –∞–≤–∞—Ö, –¥–∞—Å–≥–∞–ª —Ö”©–¥”©–ª–≥”©”©–Ω.</p>
                </div>
              </div>
              <div class="swiper-slide">
                <div class="article">
                  <img src="./img/download.jpeg" alt="">
                  <h3>–•–∞–º—Ç –æ–ª–æ–Ω—Ç–æ–π —Ö–∞—Ä–∏–ª—Ü–∞—Ö —Ö–∞—Ä–∏–ª—Ü–∞–∞</h3>
                  <p>–°–∞–Ω–∞–∞ –±–æ–¥–ª–æ–æ –∏–ª—ç—Ä—Ö–∏–π–ª—ç—Ö, —ç–≤—Ç—ç–π —Ö–∞—Ä–∏–ª—Ü–∞—Ö–∞–¥ —Ç—É—Å–ª–∞—Ö 5 –∞–ª—Ö–∞–º.</p>
                </div>
              </div>
            </div>
            <div class="swiper-pagination"></div>
          </div>
        </div>
      </main>

      <aside>
        <div id="booking" class="card booking">
          <h3>–¶–∞–≥ —Ç–æ–≤–ª–æ—Ö</h3>

          <label for="type">–ê–Ω–≥–∏</label>
          <select id="type">
            <option value="1">1 –∞–Ω–≥–∏</option>
            <option value="2">2 –∞–Ω–≥–∏</option>
            <option value="3">3 –∞–Ω–≥–∏</option>
            <option value="4">4 –∞–Ω–≥–∏</option>
            <option value="5">5 –∞–Ω–≥–∏</option>
            <option value="6">6 –∞–Ω–≥–∏</option>
            <option value="7">7 –∞–Ω–≥–∏</option>
            <option value="8">8 –∞–Ω–≥–∏</option>
            <option value="9">9 –∞–Ω–≥–∏</option>
            <option value="10">10 –∞–Ω–≥–∏</option>
            <option value="11">11 –∞–Ω–≥–∏</option>
            <option value="12">12 –∞–Ω–≥–∏</option>
          </select>

          <label for="buleg">–ë“Ø–ª—ç–≥</label>
          <select id="buleg">
            <option value="">–ë“Ø–ª—ç–≥ —Å–æ–Ω–≥–æ–Ω–æ —É—É</option>
          </select>


          <label for="name">–û–≤–æ–≥ –Ω—ç—Ä</label>
          <input id="name" type="text" placeholder="–ù—ç—Ä" />

          <label for="email">–£—Ç–∞—Å–Ω—ã –¥—É–≥–∞–∞—Ä</label>
          <input id="email" type="text" placeholder="88888888" />

          <label for="type-1">–£—É–ª–∑–∞–ª—Ç—ã–Ω —Ç”©—Ä”©–ª</label>
          <select id="type-1">
            <option value="–ê–Ω–≥–∏ —Ö–∞–º—Ç –æ–ª–æ–Ω, –≥—ç—Ä –±“Ø–ª—Ç—ç–π —Ö–æ–ª–±–æ–æ—Ç–æ–π —Ö–∞—Ä–∏–ª—Ü–∞–∞–Ω—ã —Ö—ç–ª–±—ç—Ä">–ê–Ω–≥–∏ —Ö–∞–º—Ç –æ–ª–æ–Ω, –≥—ç—Ä –±“Ø–ª—Ç—ç–π —Ö–æ–ª–±–æ–æ—Ç–æ–π
              —Ö–∞—Ä–∏–ª—Ü–∞–∞–Ω—ã —Ö—ç–ª–±—ç—Ä</option>
            <option value="–ú—ç—Ä–≥—ç–∂–∏–ª —Å–æ–Ω–≥–æ–ª—Ç—Ç–æ–π —Ö–æ–ª–±–æ–æ—Ç–æ–π –∞—Å—É—É–¥–∞–ª">–ú—ç—Ä–≥—ç–∂–∏–ª —Å–æ–Ω–≥–æ–ª—Ç—Ç–æ–π —Ö–æ–ª–±–æ–æ—Ç–æ–π –∞—Å—É—É–¥–∞–ª</option>
            <option value="–•“Ø—á–∏—Ä—Ö–∏–π–ª—ç–ª, –¥—ç—ç—Ä—ç–ª—Ö—ç–ª—Ç—Ç—ç–π —Ö–æ–ª–±–æ–æ—Ç–æ–π –∞—Å—É—É–¥–∞–ª">–•“Ø—á–∏—Ä—Ö–∏–π–ª—ç–ª, –¥—ç—ç—Ä—ç–ª—Ö—ç–ª—Ç—Ç—ç–π —Ö–æ–ª–±–æ–æ—Ç–æ–π –∞—Å—É—É–¥–∞–ª
            </option>
            <option value="–•–æ—Ä—Ç –∑—É—Ä—à–∏–ª, –¥–æ–Ω—Ç–æ–ª—Ç—Ç–æ–π —Ö–æ–ª–±–æ–æ—Ç–æ–π –∞—Å—É—É–¥–∞–ª">–•–æ—Ä—Ç –∑—É—Ä—à–∏–ª, –¥–æ–Ω—Ç–æ–ª—Ç—Ç–æ–π —Ö–æ–ª–±–æ–æ—Ç–æ–π –∞—Å—É—É–¥–∞–ª</option>
            <option value="–•—É–≤—å —Ö“Ø–Ω–∏–π —Ö”©–≥–∂–∏–ª—Ç—ç–π —Ö–æ–ª–±–æ–æ—Ç–æ–π –∞—Å—É—É–¥–∞–ª">–•—É–≤—å —Ö“Ø–Ω–∏–π —Ö”©–≥–∂–∏–ª—Ç—ç–π —Ö–æ–ª–±–æ–æ—Ç–æ–π –∞—Å—É—É–¥–∞–ª</option>
            <option value="–ë—É—Å–∞–¥">–ë—É—Å–∞–¥</option>
          </select>




          <!-- <select id="type-1">
            <option value="–•–∞—Ä–∏–ª—Ü–∞–∞–Ω—ã">–•–∞—Ä–∏–ª—Ü–∞–∞–Ω—ã –∞—Å—É—É–¥–∞–ª</option>
            <option value="–ú—ç—Ä–≥—ç–∂–∏–ª —Å–æ–Ω–≥–æ–ª—Ç">–ú—ç—Ä–≥—ç–∂–∏–ª —Å–æ–Ω–≥–æ–ª—Ç</option>
            <option value="–•“Ø—á–∏—Ä—Ö–∏–π–ª—ç–ª">–•“Ø—á–∏—Ä—Ö–∏–π–ª—ç–ª</option>
            <option value="–î–æ–Ω—Ç–æ–ª—Ç">–î–æ–Ω—Ç–æ–ª—Ç</option>
            <option value="–•—É–≤—å —Ö“Ø–Ω–∏–π —Ö”©–≥–∂–∏–ª">–•—É–≤—å —Ö“Ø–Ω–∏–π —Ö”©–≥–∂–∏–ª</option>
            <option value="–ë—É—Å–∞–¥">–ë—É—Å–∞–¥</option>
          </select> -->

          <label for="date">–û–≥–Ω–æ–æ</label>
          <input id="date" type="date" />

          <label>–¶–∞–≥ —Å–æ–Ω–≥–æ—Ö</label>
          <div class="times" id="quick-times"></div>

          <button id="bookBtn" class="primary">–¶–∞–≥ —Ç–æ–≤–ª–æ—Ö</button>
          <p id="bookMsg" style="margin-top:8px;color:var(--muted);font-size:13px"></p>
        </div>
      </aside>
    </div>

    <footer>
      <div class="container" style="padding:12px 20px">¬© <span id="year"></span> Indra cyber school</div>
    </footer>
  </div>

  <!-- Swiper JS -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>

  <!-- üü£ YEAR, NAVBAR, SWIPER, FIREBASE BOOKING -->
  <script type="module">




    const gradeToGroups = {
  "1": ["1_1", "1_2", "1_3", "1_4"],
  "2": ["2_1", "2_2"],
  "3": ["3_1", "3_2"],
  "4": ["4_1", "4_2"],
  "5": ["5_1", "5_2"],
  "6": ["6_1", "6_2", "6_3"],
  "7": ["7_1", "7_2"],
  "8": ["8_1"],
  "9": ["9_1"],
  "10": ["10_1", "10_2"],
  "11": ["11_1", "11_2", "11_3"],
  "12": ["12_1"]
};

const gradeSelect = document.getElementById('type');
const groupSelect = document.getElementById('buleg');

gradeSelect.addEventListener('change', () => {
  const grade = gradeSelect.value;
  const groups = gradeToGroups[grade] || [];
  
  groupSelect.innerHTML = '<option value="">–ë“Ø–ª—ç–≥ —Å–æ–Ω–≥–æ–Ω–æ —É—É</option>';
  groups.forEach(g => {
    const opt = document.createElement('option');
    opt.value = g;
    opt.textContent = g;
    groupSelect.appendChild(opt);
  });
});







    // ----- YEAR -----
    document.getElementById('year').textContent = new Date().getFullYear();

    // ----- NAVBAR -----
    document.getElementById('hamburger').addEventListener('click', () => {
      const mobileNav = document.getElementById('mobileNav');
      mobileNav.style.display = mobileNav.style.display === 'flex' ? 'none' : 'flex';
    });

    // ----- SWIPER -----
    const swiper = new Swiper(".swiper", {
      slidesPerView: 1.2,
      spaceBetween: 12,
      pagination: { el: ".swiper-pagination", clickable: true },
      breakpoints: {
        640: { slidesPerView: 1.5 },
        768: { slidesPerView: 2 },
        1024: { slidesPerView: 2.5 }
      }
    });

    // ----- FIREBASE CONFIG -----
    const firebaseConfig = {
      apiKey: "AIzaSyC2-x9AYrAuUtN3lwSYhV-f-003cTvdP6M",
      authDomain: "indrasetgelzui.firebaseapp.com",
      databaseURL: "https://indrasetgelzui-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "indrasetgelzui",
      storageBucket: "indrasetgelzui.firebasestorage.app",
      messagingSenderId: "546192791621",
      appId: "1:546192791621:web:5485a7ca0ffd6034346b2c",
      measurementId: "G-LRJ7F0V4DT"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // ----- –¶–ê–ì–ò–ô–ù –°–û–ù–ì–û–õ–¢ -----
    const quickTimes = document.getElementById('quick-times');

    document.getElementById('date').addEventListener('input', async (e) => {
      const d = new Date(e.target.value);
      const day = d.getDay();
      let slots = [];
      let activeDay = true;

      // –ó”©–≤—Ö”©–Ω –ú—è–≥–º–∞—Ä, –õ—Ö–∞–≥–≤–∞, –ë–∞–∞—Å–∞–Ω ”©–¥”©—Ä
      if (day === 2) slots = ["10:00", "11:20"];
      else if (day === 3 || day === 5) slots = ["09:00", "10:10", "11:20", "14:00"];
      else activeDay = false;

      quickTimes.innerHTML = '';
      if (!activeDay) {
        quickTimes.innerHTML = `<p style="color:#F7456F">–¢–∞–Ω—ã —Å–æ–Ω–≥–æ—Å–æ–Ω ”©–¥”©—Ä —Ü–∞–≥ –±–∞–π—Ö–≥“Ø–π –±–∞–π–Ω–∞.</p>`;
        return;
      }


      quickTimes.innerHTML = '';

      // Firestore-–æ–æ—Å —Ç—É—Ö–∞–π–Ω ”©–¥—Ä–∏–π–Ω –∑–∞—Ö–∏–∞–ª–≥—É—É–¥—ã–≥ —Ç–∞—Ç–∞—Ö
      const snapshot = await db.collection('bookings').where('date', '==', e.target.value).get();
      const bookedTimes = snapshot.docs.map(doc => doc.data().time);

      // –¶–∞–≥—É—É–¥—ã–≥ —Ö–∞—Ä—É—É–ª–∞—Ö
      slots.forEach(t => {
        const div = document.createElement('div');
        div.className = 'time-slot';
        div.textContent = t;

        // –•—ç—Ä—ç–≤ —ç–Ω—ç —Ü–∞–≥ –∞–ª—å —Ö—ç–¥–∏–π–Ω –∑–∞—Ö–∏–∞–ª–∞–≥–¥—Å–∞–Ω –±–æ–ª –∏–¥—ç–≤—Ö–≥“Ø–π –±–æ–ª–≥–æ–Ω–æ
        if (bookedTimes.includes(t)) {
          div.classList.add('disabled');
          div.textContent = `${t} (–∑–∞—Ö–∏–∞–ª–∞–≥–¥—Å–∞–Ω)`;
        } else {
          div.onclick = () => {
            document.querySelectorAll('.time-slot').forEach(x => x.classList.remove('active'));
            div.classList.add('active');
          };
        }

        quickTimes.appendChild(div);
      });
    });

    // ----- –¶–ê–ì –¢–û–í–õ–û–• -----
    document.getElementById('bookBtn').addEventListener('click', async () => {
      const name = document.getElementById('name').value.trim();
      const phone = document.getElementById('email').value.trim();
      const date = document.getElementById('date').value;
      const grade = document.getElementById('type').value;
      const group = document.getElementById('buleg').value.trim();
      const issue = document.getElementById('type-1').value;
      const selected = document.querySelector('.time-slot.active');
      const msg = document.getElementById('bookMsg');

      if (!name || !phone || !date || !selected) {
        msg.style.color = '#b91c1c';
        msg.textContent = '–ë“Ø—Ö —Ç–∞–ª–±–∞—Ä—É—É–¥—ã–≥ –±”©–≥–ª”©–Ω”© “Ø“Ø.';
        return;
      }

      // –î–∞–≤—Ö–∞—Ä–¥—Å–∞–Ω —Ü–∞–≥ —à–∞–ª–≥–∞—Ö
      const q = await db.collection('bookings')
        .where('date', '==', date)
        .where('time', '==', selected.textContent)
        .get();

      if (!q.empty) {
        msg.style.color = '#b91c1c';
        msg.textContent = '–≠–Ω—ç —Ü–∞–≥ –∞–ª—å —Ö—ç–¥–∏–π–Ω –∑–∞—Ö–∏–∞–ª–∞–≥–¥—Å–∞–Ω –±–∞–π–Ω–∞.';
        return;
      }

      // Firestore-–¥ —Ö–∞–¥–≥–∞–ª–∞—Ö
      try {
        await db.collection('bookings').add({
          name, phone, grade, group, issue, date,
          time: selected.textContent,
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });
        msg.style.color = '#065f46';
        msg.textContent = `–ê–º–∂–∏–ª—Ç—Ç–∞–π –∏–ª–≥—ç—ç–≥–¥–ª—ç—ç: ${date} ${selected.textContent}`;
      } catch (err) {
        console.error(err);
        msg.style.color = '#b91c1c';
        msg.textContent = '–ê–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞. –¢–∞ –¥–∞—Ö–∏–Ω –æ—Ä–æ–ª–¥–æ–Ω–æ —É—É.';
      }
    });
  </script>

  <style>
    .time-slot {
      display: inline-block;
      padding: 8px 12px;
      margin: 4px;
      border-radius: 6px;
      border: 1px solid #ccc;
      cursor: pointer;
      transition: 0.2s;
    }

    .time-slot.active {
      background-color: #2563eb;
      color: white;
    }

    .time-slot.disabled {
      background-color: #e5e7eb;
      color: #6b7280;
      cursor: not-allowed;
    }
  </style>

</body>

</html>